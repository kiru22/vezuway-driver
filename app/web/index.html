<!DOCTYPE html>
<html>
<head>
  <!--
    If you are serving your web app in a path other than the root, change the
    href value below to reflect the base path you are serving from.

    The path provided below has to start and end with a slash "/" in order for
    it to work correctly.

    For more details:
    * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base

    This is a placeholder for base href that will be replaced by the value of
    the `--base-href` argument provided to `flutter build`.
  -->
  <base href="$FLUTTER_BASE_HREF">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="Encuentra transportistas de confianza">

  <!-- Google Sign In - Client ID now configured via dart-define -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <!-- Firebase SDK for Push Notifications -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-messaging-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCtWe0-bt9x7zLGav4zzIvOWJp62OppkkY",
      authDomain: "vezuway-23673.firebaseapp.com",
      projectId: "vezuway-23673",
      storageBucket: "vezuway-23673.firebasestorage.app",
      messagingSenderId: "1002793405640",
      appId: "1:1002793405640:web:62f350f0c39db9b5c229fd"
    };
    firebase.initializeApp(firebaseConfig);
  </script>

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="logistics_app">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>

  <title>vezuway.</title>
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <script>
    (function() {
      fetch('/version.json?t=' + Date.now(), { cache: 'no-store' })
        .then(function(r) { return r.json(); })
        .then(function(data) {
          var newVersion = data.version + '.' + data.build_number;
          var oldVersion = localStorage.getItem('app_version');
          if (oldVersion && oldVersion !== newVersion) {
            localStorage.setItem('app_version', newVersion);
            var banner = document.createElement('div');
            banner.innerHTML = '<div style="position:fixed;top:0;left:0;right:0;background:#10B981;color:white;padding:16px;text-align:center;z-index:99999;font-family:sans-serif;"><b>Nueva versi√≥n disponible</b><br><small>Cierra la app completamente y vuelve a abrirla</small></div>';
            document.body.appendChild(banner);
            setTimeout(function() { banner.remove(); }, 10000);
          } else if (!oldVersion) {
            localStorage.setItem('app_version', newVersion);
          }
        }).catch(function() {});
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(regs) {
          regs.forEach(function(reg) { reg.update(); });
        });
      }
    })();
  </script>
  <script src="flutter_bootstrap.js" async></script>
</body>
</html>
